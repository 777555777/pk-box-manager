@startuml
class StorageMeta {
  +activeDexId: string
  +dexIds: string[]
}

class DexSave {
  +id: string
  +config: DexConfig        // linke Seite: Struktur/Preset
  +state: DexState          // rechte Seite: Fortschritt
}

' ---- Linke Seite: Struktur des Pokedex ----
class DexConfig {
  +id: string
  +type: "preset" | "custom"
  +basePreset: string?
  +name: string
  +tags: string[]
  +boxList: string[]
  +pokemonOrder: BoxOrder[]
  +createdAt: number
  +updatedAt: number
}

class BoxOrderConfig {
  +title: string
  +pokemon: PokemonEntry[]
}

class PokemonEntry {
  +pokemonid: string
  +formid: string?
  +id_national: number
}

' ---- Rechte Seite: User State ----
class DexState {
  +version: string
  +name: string
  +displayName: string
  +coverImage: string
  +sortOrder: number
  +pokemon: Map<string, PokemonEditState>
  +boxes: Box[]
}

class PokemonEditState {
  +pokemonEntry: PokemonEntry
  +captured: boolean
  +ball: string
  +shiny: boolean
  +caughtIn: string
  +ability: string
  +comment: string
  +ribbons: string[]
  +marks: string[]
  +isCustomized: boolean
}

class BoxState {
  +id: string
  +title: string
  +settings: BoxSettings
  +pokemon: string[]
}

class BoxSettings {
  +wallpaper: string
}

' ---- Beziehungen ----
StorageMeta "1" o-- "*" DexSave : references
DexSave "1" o-- "1" DexConfig
DexSave "1" o-- "1" DexState
DexConfig "1" o-- "*" BoxOrderConfig
BoxOrderConfig "1" o-- "*" PokemonEntry
DexState "1" o-- "*" PokemonEditState
DexState "1" o-- "*" BoxState
BoxState "1" o-- "1" BoxSettings
PokemonEditState "1" o-- "1" PokemonEntry
@enduml
